<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open Graph Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 { color: #333; }
        h2 { color: #666; margin-top: 0; }
        .meta-tag {
            background: #f0f0f0;
            padding: 10px;
            margin: 5px 0;
            border-radius: 4px;
            font-family: monospace;
            word-break: break-all;
        }
        .image-preview {
            max-width: 100%;
            margin: 20px 0;
            border: 2px solid #ddd;
            border-radius: 4px;
        }
        .status {
            padding: 10px;
            border-radius: 4px;
            margin: 10px 0;
        }
        .success { background: #d4edda; color: #155724; }
        .error { background: #f8d7da; color: #721c24; }
        button {
            background: #b8860b;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px 10px 0;
        }
        button:hover {
            background: #9a7209;
        }
    </style>
</head>
<body>
    <h1>üîç Open Graph Image Test</h1>
    
    <div class="test-section">
        <h2>1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ</h2>
        <p>–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ –µ –¥–æ—Å—Ç—ä–ø–Ω–æ:</p>
        <div class="meta-tag">http://localhost:3000/logo.png</div>
        <button onclick="testImage()">–¢–µ—Å—Ç–≤–∞–π –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ</button>
        <div id="imageStatus"></div>
        <img id="imagePreview" class="image-preview" style="display:none;" alt="Preview">
    </div>

    <div class="test-section">
        <h2>2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ Meta —Ç–∞–≥–æ–≤–µ—Ç–µ</h2>
        <p>–û—Ç–≤–æ—Ä–µ—Ç–µ <a href="http://localhost:3000" target="_blank">http://localhost:3000</a> –∏ –ø—Ä–æ–≤–µ—Ä–µ—Ç–µ:</p>
        <ol>
            <li>–ù–∞—Ç–∏—Å–Ω–µ—Ç–µ <strong>F12</strong> –∑–∞ Developer Tools</li>
            <li>–û—Ç–∏–¥–µ—Ç–µ –Ω–∞ —Ç–∞–± <strong>Elements</strong> –∏–ª–∏ <strong>Elements</strong></li>
            <li>–ù–∞–º–µ—Ä–µ—Ç–µ <code>&lt;head&gt;</code> —Å–µ–∫—Ü–∏—è—Ç–∞</li>
            <li>–ü—Ä–æ–≤–µ—Ä–µ—Ç–µ –¥–∞–ª–∏ –∏–º–∞ <code>og:image</code> —Ç–∞–≥–æ–≤–µ</li>
        </ol>
        <button onclick="checkMetaTags()">–ü—Ä–æ–≤–µ—Ä–∏ Meta —Ç–∞–≥–æ–≤–µ—Ç–µ</button>
        <div id="metaStatus"></div>
    </div>

    <div class="test-section">
        <h2>3. –ò–∑–≤–ª–µ—á–µ–Ω–∏ Meta —Ç–∞–≥–æ–≤–µ</h2>
        <div id="metaTags"></div>
    </div>

    <script>
        async function testImage() {
            const statusDiv = document.getElementById('imageStatus');
            const previewImg = document.getElementById('imagePreview');
            const imageUrl = 'http://localhost:3000/logo.png';
            
            statusDiv.innerHTML = '<p>–¢–µ—Å—Ç–≤–∞–Ω–µ...</p>';
            previewImg.style.display = 'none';
            
            try {
                const response = await fetch(imageUrl, { method: 'HEAD' });
                if (response.ok) {
                    statusDiv.innerHTML = '<div class="status success">‚úÖ –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ –µ –¥–æ—Å—Ç—ä–ø–Ω–æ!</div>';
                    previewImg.src = imageUrl;
                    previewImg.style.display = 'block';
                    previewImg.onerror = () => {
                        statusDiv.innerHTML += '<div class="status error">‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ –Ω–µ –º–æ–∂–µ –¥–∞ —Å–µ –∑–∞—Ä–µ–¥–∏</div>';
                    };
                } else {
                    statusDiv.innerHTML = '<div class="status error">‚ùå –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ—Ç–æ –Ω–µ –µ –¥–æ—Å—Ç—ä–ø–Ω–æ (Status: ' + response.status + ')</div>';
                }
            } catch (error) {
                statusDiv.innerHTML = '<div class="status error">‚ùå –ì—Ä–µ—à–∫–∞: ' + error.message + '</div>';
            }
        }

        async function checkMetaTags() {
            const statusDiv = document.getElementById('metaStatus');
            const tagsDiv = document.getElementById('metaTags');
            
            statusDiv.innerHTML = '<p>–ó–∞—Ä–µ–∂–¥–∞–Ω–µ...</p>';
            tagsDiv.innerHTML = '';
            
            try {
                const response = await fetch('http://localhost:3000');
                const html = await response.text();
                
                // –ò–∑–≤–ª–∏—á–∞–Ω–µ –Ω–∞ meta —Ç–∞–≥–æ–≤–µ—Ç–µ
                const ogImageMatch = html.match(/<meta\s+property=["']og:image["']\s+content=["']([^"']+)["']/i);
                const ogTitleMatch = html.match(/<meta\s+property=["']og:title["']\s+content=["']([^"']+)["']/i);
                const ogDescMatch = html.match(/<meta\s+property=["']og:description["']\s+content=["']([^"']+)["']/i);
                
                if (ogImageMatch) {
                    statusDiv.innerHTML = '<div class="status success">‚úÖ –ù–∞–º–µ—Ä–µ–Ω–∏ Open Graph —Ç–∞–≥–æ–≤–µ!</div>';
                    tagsDiv.innerHTML = `
                        <div class="meta-tag"><strong>og:image:</strong> ${ogImageMatch[1]}</div>
                        <div class="meta-tag"><strong>og:title:</strong> ${ogTitleMatch ? ogTitleMatch[1] : '–ù–µ –µ –Ω–∞–º–µ—Ä–µ–Ω'}</div>
                        <div class="meta-tag"><strong>og:description:</strong> ${ogDescMatch ? ogDescMatch[1] : '–ù–µ –µ –Ω–∞–º–µ—Ä–µ–Ω'}</div>
                    `;
                } else {
                    statusDiv.innerHTML = '<div class="status error">‚ùå –ù–µ —Å–∞ –Ω–∞–º–µ—Ä–µ–Ω–∏ og:image —Ç–∞–≥–æ–≤–µ</div>';
                }
            } catch (error) {
                statusDiv.innerHTML = '<div class="status error">‚ùå –ì—Ä–µ—à–∫–∞: ' + error.message + '<br>–£–≤–µ—Ä–µ—Ç–µ —Å–µ, —á–µ —Å—ä—Ä–≤—ä—Ä—ä—Ç —Ä–∞–±–æ—Ç–∏ –Ω–∞ http://localhost:3000</div>';
            }
        }
    </script>
</body>
</html>

